{
	"info": {
		"_postman_id": "estudai-api-functional",
		"name": "Estudai API - Completa e Funcional",
		"description": "Collection 100% funcional testada com dados reais do banco PostgreSQL\n\nUsuário Mock (criado automaticamente no banco):\n- Email: mock@estudai.com\n- Senha: Teste@123\n- ID: 1001\n\nO token é salvo automaticamente após o login.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Authentication",
			"item": [
				{
					"name": "Register New User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 or 409\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 409]);",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    pm.test(\"User registered successfully\", function () {",
									"        var jsonData = pm.response.json();",
									"        pm.expect(jsonData.name).to.exist;",
									"        pm.expect(jsonData.email).to.exist;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Novo Usuario Teste\",\n    \"email\": \"novo{{$timestamp}}@gmail.com\",\n    \"password\": \"Senha123@\",\n    \"birthDate\": \"2005-06-15\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"register"
							]
						},
						"description": "Cria um novo usuário. Usa timestamp para gerar email único."
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Check if environment is active",
									"if (!pm.environment.name) {",
									"    console.log(\"WARNING: No environment selected! Token may not be saved.\");",
									"    console.log(\"Please select 'Estudai API - Local' environment.\");",
									"} else {",
									"    console.log(\"Environment active:\", pm.environment.name);",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Save token immediately if response is successful (OUTSIDE of tests)",
									"if (pm.response.code === 200) {",
									"    try {",
									"        var jsonData = pm.response.json();",
									"        if (jsonData && jsonData.token) {",
									"            // Try to save in environment first",
									"            if (pm.environment.name) {",
									"                pm.environment.set(\"token\", jsonData.token);",
									"                console.log(\"✅ Token saved to environment:\", pm.environment.name);",
									"            } else {",
									"                // Fallback: save to collection variables",
									"                pm.collectionVariables.set(\"token\", jsonData.token);",
									"                console.log(\"⚠️ No environment active. Token saved to collection variables.\");",
									"                console.log(\"⚠️ Please select 'Estudai API - Local' environment for proper token storage.\");",
									"            }",
									"            console.log(\"Token value (first 50 chars):\", jsonData.token.substring(0, 50) + \"...\");",
									"        } else {",
									"            console.log(\"❌ ERROR: No token found in response!\");",
									"            console.log(\"Response body:\", pm.response.text());",
									"        }",
									"    } catch (e) {",
									"        console.log(\"❌ ERROR parsing response:\", e.message);",
									"        console.log(\"Response code:\", pm.response.code);",
									"        console.log(\"Response body:\", pm.response.text());",
									"    }",
									"} else {",
									"    console.log(\"❌ Login failed with status code:\", pm.response.code);",
									"    console.log(\"Response body:\", pm.response.text());",
									"}",
									"",
									"// Tests",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has token\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.token).to.exist;",
									"    pm.expect(jsonData.token).to.be.a('string');",
									"    pm.expect(jsonData.token.length).to.be.greaterThan(0);",
									"});",
									"",
									"pm.test(\"User data is present\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.name).to.exist;",
									"    pm.expect(jsonData.streakDays).to.exist;",
									"    pm.expect(jsonData.coins).to.exist;",
									"});",
									"",
									"// Verify token was saved",
									"pm.test(\"Token was saved to environment\", function () {",
									"    var savedToken = pm.environment.get(\"token\") || pm.collectionVariables.get(\"token\");",
									"    pm.expect(savedToken).to.exist;",
									"    pm.expect(savedToken).to.be.a('string');",
									"    pm.expect(savedToken.length).to.be.greaterThan(0);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"mock@estudai.com\",\n    \"password\": \"Teste@123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Faz login e salva o token automaticamente na variável de ambiente."
					},
					"response": []
				}
			],
			"description": "Endpoints de autenticação e registro"
		},
		{
			"name": "2. Questions",
			"item": [
				{
					"name": "Get All Questions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is an array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Has at least one question\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.length).to.be.greaterThan(0);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/questions?limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"questions"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								}
							]
						},
						"description": "Lista todas as questões (endpoint público)"
					},
					"response": []
				},
				{
					"name": "Get Questions by Subject (Matematica)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"All questions are from matematica\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.forEach(function(question) {",
									"        pm.expect(question.subject).to.equal('matematica');",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/questions?subject=matematica&limit=5",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"questions"
							],
							"query": [
								{
									"key": "subject",
									"value": "matematica"
								},
								{
									"key": "limit",
									"value": "5"
								}
							]
						},
						"description": "Filtra questões por matéria"
					},
					"response": []
				},
				{
					"name": "Get Question by ID (Matematica)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Question has required fields\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.exist;",
									"    pm.expect(jsonData.title).to.exist;",
									"    pm.expect(jsonData.alternatives).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/questions/34",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"questions",
								"34"
							]
						},
						"description": "Busca questão específica (ID 34 - Matemática)"
					},
					"response": []
				},
				{
					"name": "Get Question by ID (Ciencias Natureza)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Question is from ciencias-natureza\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.subject).to.equal('ciencias-natureza');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/questions/6",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"questions",
								"6"
							]
						},
						"description": "Busca questão de Ciências da Natureza (ID 6)"
					},
					"response": []
				},
				{
					"name": "Get Available Subjects",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Has subjects\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"    pm.expect(jsonData.length).to.be.greaterThan(0);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/questions/subjects",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"questions",
								"subjects"
							]
						},
						"description": "Lista todas as matérias disponíveis"
					},
					"response": []
				},
				{
					"name": "Get Available Years",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Has years\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"    pm.expect(jsonData).to.include(2023);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/questions/years",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"questions",
								"years"
							]
						},
						"description": "Lista todos os anos disponíveis"
					},
					"response": []
				}
			],
			"description": "Endpoints para consulta de questões do ENEM"
		},
		{
			"name": "3. Question Answers",
			"item": [
				{
					"name": "Answer Question (Matematica - Correta)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has answer data\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.exist;",
									"    pm.expect(jsonData.isCorrect).to.exist;",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"answerId\", jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"questionId\": 34,\n    \"userAnswer\": \"A\",\n    \"responseTimeSeconds\": 45\n}"
						},
						"url": {
							"raw": "{{base_url}}/answers",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"answers"
							]
						},
						"description": "Responde uma questão de matemática (ID 34)"
					},
					"response": []
				},
				{
					"name": "Answer Question (Ciencias - Incorreta)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Answer was recorded\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.isCorrect).to.be.a('boolean');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"questionId\": 6,\n    \"userAnswer\": \"E\",\n    \"responseTimeSeconds\": 60\n}"
						},
						"url": {
							"raw": "{{base_url}}/answers",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"answers"
							]
						},
						"description": "Responde uma questão de ciências (ID 6) - propositalmente errada"
					},
					"response": []
				},
				{
					"name": "Get My Answers",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is an array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/answers",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"answers"
							]
						},
						"description": "Lista todas as respostas do usuário autenticado"
					},
					"response": []
				},
				{
					"name": "Get Answer by ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Answer details exist\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.questionId).to.exist;",
									"    pm.expect(jsonData.userAnswer).to.exist;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/answers/{{answerId}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"answers",
								"{{answerId}}"
							]
						},
						"description": "Busca uma resposta específica (ID salvo automaticamente)"
					},
					"response": []
				},
				{
					"name": "Get Answer Statistics",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Statistics are present\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.totalAnswers).to.exist;",
									"    pm.expect(jsonData.correctAnswers).to.exist;",
									"    pm.expect(jsonData.wrongAnswers).to.exist;",
									"    pm.expect(jsonData.accuracyRate).to.exist;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/answers/statistics",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"answers",
								"statistics"
							]
						},
						"description": "Retorna estatísticas: total, corretas, erradas e taxa de acerto"
					},
					"response": []
				}
			],
			"description": "Endpoints para responder questões e ver estatísticas"
		},
		{
			"name": "4. Study Goals",
			"item": [
				{
					"name": "Create Study Goal",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Goal was created\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.exist;",
									"    pm.expect(jsonData.status).to.equal('ACTIVE');",
									"    pm.environment.set(\"goalId\", jsonData.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"Preparação ENEM 2024\",\n    \"description\": \"Meta intensiva de estudos\",\n    \"startDate\": \"2024-01-01\",\n    \"endDate\": \"2024-03-01\",\n    \"dailyMinutes\": 120,\n    \"dailyQuestions\": 20,\n    \"focusSubject\": \"matematica\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/study-goals",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"study-goals"
							]
						},
						"description": "Cria uma nova meta de estudo (mínimo 7 dias, máximo 365)"
					},
					"response": []
				},
				{
					"name": "Get All My Goals",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is an array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/study-goals",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"study-goals"
							]
						},
						"description": "Lista todas as metas do usuário"
					},
					"response": []
				},
				{
					"name": "Get Active Goals",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"All goals are active\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.forEach(function(goal) {",
									"        pm.expect(goal.status).to.equal('ACTIVE');",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/study-goals/active",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"study-goals",
								"active"
							]
						},
						"description": "Lista apenas metas ativas"
					},
					"response": []
				},
				{
					"name": "Get Goal by ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Goal details exist\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.title).to.exist;",
									"    pm.expect(jsonData.progressPercentage).to.exist;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/study-goals/{{goalId}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"study-goals",
								"{{goalId}}"
							]
						},
						"description": "Busca meta específica (ID salvo automaticamente)"
					},
					"response": []
				},
				{
					"name": "Update Study Goal",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Goal was updated\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.dailyMinutes).to.equal(150);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"Preparação ENEM 2024 - Atualizado\",\n    \"description\": \"Meta intensiva REVISADA\",\n    \"startDate\": \"2024-01-01\",\n    \"endDate\": \"2024-03-01\",\n    \"dailyMinutes\": 150,\n    \"dailyQuestions\": 25,\n    \"focusSubject\": \"ciencias-natureza\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/study-goals/{{goalId}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"study-goals",
								"{{goalId}}"
							]
						},
						"description": "Atualiza uma meta existente (apenas metas ATIVAS)"
					},
					"response": []
				},
				{
					"name": "Cancel Study Goal",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/study-goals/{{goalId}}/cancel",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"study-goals",
								"{{goalId}}",
								"cancel"
							]
						},
						"description": "Cancela uma meta de estudo"
					},
					"response": []
				}
			],
			"description": "Endpoints para gerenciar metas de estudo"
		},
		{
			"name": "5. Study Streaks",
			"item": [
				{
					"name": "Get My Study Streak",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Streak data exists\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.consecutiveDays).to.exist;",
									"    pm.expect(jsonData.longestStreak).to.exist;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/study-streak",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"study-streak"
							]
						},
						"description": "Retorna a sequência de dias estudados do usuário"
					},
					"response": []
				},
				{
					"name": "Reset Study Streak",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/study-streak/reset",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"study-streak",
								"reset"
							]
						},
						"description": "Reseta a sequência de dias para zero"
					},
					"response": []
				}
			],
			"description": "Endpoints para gerenciar sequências de estudo (gamificação)"
		},
		{
			"name": "6. Custom Lists",
			"item": [
				{
					"name": "Create Custom List (by filters)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"List was created\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.exist;",
									"    pm.expect(jsonData.name).to.exist;",
									"    pm.environment.set(\"listId\", jsonData.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Matemática 2023\",\n    \"description\": \"Questões de matemática do ENEM 2023\",\n    \"filterYear\": 2023,\n    \"filterSubject\": \"matematica\",\n    \"questionsCount\": 10,\n    \"includeAnswered\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/custom-lists",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"custom-lists"
							]
						},
						"description": "Cria lista usando filtros (matéria, ano, quantidade)"
					},
					"response": []
				},
				{
					"name": "Create Custom List (by IDs)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Minhas Questões Favoritas\",\n    \"description\": \"Lista com questões específicas\",\n    \"questionIds\": [34, 39, 49, 6, 9, 11]\n}"
						},
						"url": {
							"raw": "{{base_url}}/custom-lists",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"custom-lists"
							]
						},
						"description": "Cria lista com IDs específicos de questões"
					},
					"response": []
				},
				{
					"name": "Get My Custom Lists",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is an array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/custom-lists",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"custom-lists"
							]
						},
						"description": "Lista todas as listas personalizadas do usuário"
					},
					"response": []
				},
				{
					"name": "Get Custom List by ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"List has questions\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.questions).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/custom-lists/{{listId}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"custom-lists",
								"{{listId}}"
							]
						},
						"description": "Busca lista específica com todas as questões"
					},
					"response": []
				},
				{
					"name": "Update Custom List",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Matemática 2023 - Atualizada\",\n    \"description\": \"Questões revisadas\",\n    \"filterYear\": 2023,\n    \"filterSubject\": \"matematica\",\n    \"questionsCount\": 15,\n    \"includeAnswered\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/custom-lists/{{listId}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"custom-lists",
								"{{listId}}"
							]
						},
						"description": "Atualiza uma lista existente"
					},
					"response": []
				},
				{
					"name": "Delete Custom List",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/custom-lists/{{listId}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"custom-lists",
								"{{listId}}"
							]
						},
						"description": "Deleta uma lista personalizada"
					},
					"response": []
				}
			],
			"description": "Endpoints para criar e gerenciar listas personalizadas de questões"
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080/api",
			"type": "string"
		},
		{
			"key": "token",
			"value": "",
			"type": "string"
		},
		{
			"key": "goalId",
			"value": "",
			"type": "string"
		},
		{
			"key": "listId",
			"value": "",
			"type": "string"
		},
		{
			"key": "answerId",
			"value": "",
			"type": "string"
		}
	]
}

